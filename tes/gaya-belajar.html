<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/tes.css">
    <title>Tes Gaya Belajar</title>
    <link rel="icon" type="image/x-icon" href="/asset/icon/ic-logo-setudy.svg">


</head>

<body>
    <nav>
        <div class="navbar">
            <div class="nav-logo">
                <a href="/dashboard.html">
                    <h1>Setudy.</h1>
                </a>
            </div>
    </nav>
    <div class="hero">
        <div class="tes-con">
            <h1>Tes RIASEC</h1>
            <p>Temukan apa bidang yang kamu inginkan!</p>
            <div class="soal">

                <form id="myForm">
                    <div>
                        <label>Ketika saya mengoperasikan peralatan baru, saya biasanya :</label><br>
                        <input type="radio" id="q1_yes" name="q1" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Membaca petunjuknya terlebih dahulu</label>
                        <input type="radio" id="q1_no" name="q1" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Mendengarkan penjelasan dari seseorang yang pernah menggunakannya</label>
                        <input type="radio" id="q1_no" name="q1" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Menggunakannya langsung, saya bisa belajar ketika menggunakannya</label>
                    </div>
                    <div>
                        <label>Ketika saya perlu petunjuk untuk bepergian, saya biasanya :</label><br>
                        <input type="radio" id="q1_yes" name="q2" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Melihat map atau peta</label>
                        <input type="radio" id="q1_no" name="q2" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Bertanya denah atau arah ke orang lain</label>
                        <input type="radio" id="q1_no" name="q2" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Menggunakan kompas dan mengikutinya</label>
                    </div>
                    <div>
                        <label>Ketika saya baru memasak, saya biasanya melakukan :</label><br>
                        <input type="radio" id="q1_yes" name="q3" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Mengikuti petunjuk resep tertulis</label>
                        <input type="radio" id="q1_no" name="q3" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Meminta penjelasan kepada seorang teman</label>
                        <input type="radio" id="q1_no" name="q3" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Mengikuti naluri, mencicipi selagi memasaknya</label>
                    </div>
                    <div>
                        <label>Jika saya mengajar seseorang tentang sesuatu yang baru, saya cenderung untuk :</label><br>
                        <input type="radio" id="q1_yes" name="q4" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Menulis instruksi untuk mereka</label>
                        <input type="radio" id="q1_no" name="q4" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Memberikan penjelasan secara lisan</label>
                        <input type="radio" id="q1_no" name="q4" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Memperagakan terlebih dahulu, kemudian meminta mereka untuk mempraktekkannya</label>
                    </div>
                    <div>
                        <label>Saya cenderung mengatakan:</label><br>
                        <input type="radio" id="q1_yes" name="q5" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Lihat bagaimana saya melakukannya</label>
                        <input type="radio" id="q1_no" name="q5" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Dengarkan penjelasan saya</label>
                        <input type="radio" id="q1_no" name="q5" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Silahkan dikerjakan</label>
                    </div>
                    <div>
                        <label>Selama waktu luang, saya paling menikmati saat :</label><br>
                        <input type="radio" id="q1_yes" name="q6" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Pergi ke museum atau perpustakaan</label>
                        <input type="radio" id="q1_no" name="q6" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Mendengarkan musik dan berbincang dengan teman-teman saya</label>
                        <input type="radio" id="q1_no" name="q6" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Berolahraga atau mengerjakan apa saja</label>
                    </div>
                    <div>
                        <label>Ketika saya pergi berbelanja pakaian, saya cenderung untuk :</label><br>
                        <input type="radio" id="q1_yes" name="q7" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Membayangkan apakah pakaian tersebut cocok untuk saya</label>
                        <input type="radio" id="q1_no" name="q7" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Meminta rekomendasi dengan karyawan toko</label>
                        <input type="radio" id="q1_no" name="q7" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Mencoba pakaian dan melihat kecocokannya</label>
                    </div>
                    <div>
                        <label>Saat merencanakan liburan, saya biasanya :</label><br>
                        <input type="radio" id="q1_yes" name="q8" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Membaca banyak informasi tempat berlibur di internet atau brosur</label>
                        <input type="radio" id="q1_no" name="q8" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Meminta rekomendasi dari teman-teman</label>
                        <input type="radio" id="q1_no" name="q8" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Membayangkan akan seperti apa jika berada di sana</label>
                    </div>
                    <div>
                        <label>Jika saya ingin membeli mobil baru, saya akan :</label><br>
                        <input type="radio" id="q1_yes" name="q9" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Membaca ulasan di internet, koran, dan majalah</label>
                        <input type="radio" id="q1_no" name="q9" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Membahas apa yang saya butuhkan dengan teman-teman</label>
                        <input type="radio" id="q1_no" name="q9" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Mencoba banyak jenis mobil yang berbeda</label>
                    </div>
                    <div>
                        <label>Ketika saya sedang belajar keterampilan baru, saya paling senang :</label><br>
                        <input type="radio" id="q1_yes" name="q10" value="a">
                        <label for="q1_yes" style="font-size: 16px; font-weight: 400;">Melihat apa yang pengajar lakukan</label>
                        <input type="radio" id="q1_no" name="q10" value="b">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Menanyakan ke pengajar tentang apa yang seharusnya saya lakukan</label>
                        <input type="radio" id="q1_no" name="q10" value="c">
                        <label for="q1_no" style="font-size: 16px; font-weight: 400;">Mencoba dan mempraktekkannya secara langsung</label>
                    </div>
                   
                    



                   <a href=""><button id="submit" type="button">Submit</button></a> 
                </form>

            </div>
        </div>
        <div class="hasil-con">
            <h1>Gaya belajar kamu adalah...</h1>
            <div class="con-riasec">
                <h1 id="gaya" style="font-size: 48px; font-weight: 600;"></h1>
            </div>
            <h2>Ini adalah gaya belajar kamu!!</h2>

        </div>
        <div class="riasec-con">
            <img src="/asset/img/gayabelajar.png" alt="">
        </div>

    </div>




    <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
            import { getDatabase, get,update, set, ref , child} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        document.addEventListener("DOMContentLoaded", function() {
        let creds = JSON.parse(sessionStorage.getItem("creds"));
        let info = JSON.parse(sessionStorage.getItem("user-info"));
        const tesCon = document.querySelector('.tes-con');
        const hasilCon = document.querySelector('.hasil-con');
        const riasecCon = document.querySelector('.riasec-con');
        const submitBtn = document.getElementById('submit');
        const gayaId = document.getElementById('gaya');
        const firebaseConfig = {
           apiKey: "AIzaSyC02kA2sOKfzUPLlfeHOr66Vf3HsIpPRhw",
           authDomain: "setudy-9d61c.firebaseapp.com",
           databaseURL: "https://setudy-9d61c-default-rtdb.asia-southeast1.firebasedatabase.app",
           projectId: "setudy-9d61c",
           storageBucket: "setudy-9d61c.appspot.com",
           messagingSenderId: "583846931989",
           appId: "1:583846931989:web:fd9f2effc67b313772e81c",
           measurementId: "G-H3WL8YX8XY"
};

        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const dbref = ref(db);
        function submitForm() {
            var visual = 0;
            var audio = 0;
            var kinetic = 0;

            
                    var q1 = document.querySelector('input[name="q1"]:checked').value
                    var q2 = document.querySelector('input[name="q2"]:checked').value
                    var q3 = document.querySelector('input[name="q3"]:checked').value
                    var q4 = document.querySelector('input[name="q4"]:checked').value
                    var q5 = document.querySelector('input[name="q5"]:checked').value
                    var q6 = document.querySelector('input[name="q6"]:checked').value
                    var q7 = document.querySelector('input[name="q7"]:checked').value
                    var q8 = document.querySelector('input[name="q8"]:checked').value
                    var q9 = document.querySelector('input[name="q9"]:checked').value
                    var q10 = document.querySelector('input[name="q10"]:checked').value

                    var data = [
                {
                        key:q1
                    },
                {
                        key:q2
                    },
                {
                        key:q3
                    },
                {
                        key:q4
                    },
                {
                        key:q5
                    },
                {
                        key:q6
                    },
                {
                        key:q7
                    },
                {
                        key:q8
                    },
                {
                        key:q9
                    },
                    {
                        key:q10
                    }


                ]
            console.log(data);
            

            data.forEach(val => {

                if (val.key == 'a'){
                   visual++ 
                }
                if (val.key == 'b'){
                   audio++ 
                }
                if (val.key == 'b'){
                   kinetic++ 
                }
                
            })
            console.log(visual)
                   if(visual >= kinetic && visual >= audio) {
                    update(ref(db, 'UsersAuthList/' + creds.uid + '/progress'), {
                        gaya:'visual',
                        condition:1
                    })
                   }
                   if(audio >= kinetic && audio >= visual) {
                    update(ref(db, 'UsersAuthList/' + creds.uid + '/progress'), {
                        gaya:'audio',
                        condition:1
                    })
                   }
                   if(kinetic >= visual && kinetic >= audio) {
                    update(ref(db, 'UsersAuthList/' + creds.uid + '/progress'), {
                        gaya:'kinetic',
                        condition:1
                    })
                   }
                    
  
                    

                    



            }       


        get(child(dbref, `UsersAuthList/${creds.uid}/progress`)).then((gaya)=> {
console.log(gaya.val().gaya)
let condition = gaya.val().condition;
let gayaData = gaya.val().gaya;

 if (condition == 0){
 tesCon.style.display = 'flex'
 submitBtn.addEventListener('click', submitForm);
 } else if(condition == 1){
 hasilCon.style.display = 'flex'
 riasecCon.style.display = 'flex'
 gayaId.innerText = gaya.val().gaya;
 

 }

})



})
       



    



           
        </script>

</body>

</html>